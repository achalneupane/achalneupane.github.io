<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.4.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Achal Neupane">

  
  
  
    
  
  <meta name="description" content="Statistics series">

  
  <link rel="alternate" hreflang="en-us" href="/achalneupane.github.io/post/control_structures/">

  


  

  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700|Roboto:400,400italic,700|Roboto+Mono&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/achalneupane.github.io/css/academic.min.3072054fc61fe865aa34bcb366de141d.css">

  

  
  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-145752794-1', 'auto');
      
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  
  

  

  <link rel="manifest" href="/achalneupane.github.io/index.webmanifest">
  <link rel="icon" type="image/png" href="/achalneupane.github.io/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/achalneupane.github.io/img/icon-192.png">

  <link rel="canonical" href="/achalneupane.github.io/post/control_structures/">

  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="twitter:site" content="@achalneupane">
  <meta property="twitter:creator" content="@achalneupane">
  
  <meta property="og:site_name" content="Achal Neupane">
  <meta property="og:url" content="/achalneupane.github.io/post/control_structures/">
  <meta property="og:title" content="Control Structures | Achal Neupane">
  <meta property="og:description" content="Statistics series"><meta property="og:image" content="/achalneupane.github.io/img/icon-192.png">
  <meta property="twitter:image" content="/achalneupane.github.io/img/icon-192.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2019-06-05T17:26:23-05:00">
    
    <meta property="article:modified_time" content="2019-06-05T17:26:23-05:00">
  

  


  





  <title>Control Structures | Achal Neupane</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/achalneupane.github.io/">Achal Neupane</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/achalneupane.github.io/#featured"><span>Publications</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/achalneupane.github.io/#impact"><span>Impact</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/achalneupane.github.io/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/achalneupane.github.io/#contact"><span>Contact</span></a>
        </li>

        
        

      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


  <article class="article" itemscope itemtype="http://schema.org/Article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1 itemprop="name">Control Structures</h1>

  

  
    



<meta content="2019-06-05 17:26:23 -0500 CDT" itemprop="datePublished">
<meta content="2019-06-05 17:26:23 -0500 CDT" itemprop="dateModified">

<div class="article-metadata">

  
  
  
  
  <div>
    



  <span itemprop="author name" itemtype="http://schema.org/Person"><a href="/achalneupane.github.io/authors/achal-neupane/"><strong>Achal Neupane</strong></a></span>

  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    <time>Jun 5, 2019</time>
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    18 min read
  </span>
  

  
  
  

  
  

  
    
<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/achalneupane.github.io/post/control_structures/&amp;text=Control%20Structures" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/achalneupane.github.io/post/control_structures/&amp;t=Control%20Structures" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Control%20Structures&amp;body=/achalneupane.github.io/post/control_structures/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/achalneupane.github.io/post/control_structures/&amp;title=Control%20Structures" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Control%20Structures%20/achalneupane.github.io/post/control_structures/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/achalneupane.github.io/post/control_structures/&amp;title=Control%20Structures" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>


  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      


<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<p>There are six exercises below. You are required to provide solutions for at least four of the five. You are required to solve at least one exercise in R, and at least one in SAS. You are required to provide five solutions, each solution will be worth 10 points. Thus, you may choose to provide both R and SAS solutions for a single exercise, or you may solve five of the sixth problems, mixing the languages as you wish.</p>
<p><em>Warning</em> I will continue restricting the use of external libraries in R, particularly <code>tidyverse</code> libraries. You may choose to use <code>ggplot2</code>, but take care that the plots you produce are at least as readable as the equivalent plots in base R. You will be allowed to use whatever libraries tickle your fancy in the midterm and final projects.</p>
<div id="experimental" class="section level4">
<h4>Experimental</h4>
<p>Again, you will be allowed to provide one solution using Python. Elaborate on the similarities and differences between Ptyhon function definitions and R or IML or Macro language.</p>
</div>
<div id="reuse" class="section level2">
<h2>Reuse</h2>
<p>For many of these exercises, you may be able to reuse functions written in prior homework. Define those functions here. I’m also including data vectors that can be used in some exercises.</p>
<pre class="r"><code>CaloriesPerServingMean &lt;- c(268.1, 271.1, 280.9, 294.7, 285.6, 288.6, 384.4)
CaloriesPerServingSD &lt;- c(124.8, 124.2, 116.2, 117.7, 118.3, 122.0, 168.3)</code></pre>
</div>
<div id="exercise-1" class="section level1">
<h1>Exercise 1</h1>
<p>Write a general Cohen <span class="math inline">\(d\)</span> function to be more generally useful, accepting a wider range of arguments. For convenience, name this <code>general.d</code>.</p>
<p>The new function should accept two parameters, <code>m</code>, <code>s</code></p>
<p>In your function, check for these condititions:</p>
<ul>
<li><p>If <code>m</code> is of length 1 and <code>s</code> is length 1, then simply divide <code>m/s</code> - that is, proceed with the calculations as if <code>m = %Diff</code> and <code>s = CV</code>.</p></li>
<li>If <code>m</code> is of length 2, then calculate the difference and proceed with the calculations.</li>
<li><p>If <code>m</code> is of length greater than 2, find the difference between the min and max of <code>m</code> and proceed with the calculations.</p></li>
<li><p>If s is of length greater than 1 calculate pooled sd as</p></li>
</ul>
<p><span class="math display">\[
s^2_{pooled} = \sqrt{\frac{\sum_i^k s_i^2}{k}}
\]</span></p>
<pre class="r"><code># Creating the general.d function with all possible combinations for m and s
# conditions:
general.d &lt;- function(m, s){
  if(length(m) == 1 &amp;&amp; length(s) == 1){
    Diff = m
    CV = s
    print(&quot;EffectSize calculated for length(m) == 1, and length(s) == 1&quot;)
  }else if (length(m) == 2 &amp;&amp; length(s) &gt; 1){
    Diff = abs(m[1]-m[2])
    CV = sqrt(sum((s^2))/length(s))
    print(&quot;EffectSize calculated for length(m) == 2, and length(s) &gt; 1&quot;)
  }else if (length(m) == 2 &amp;&amp; length(s) == 1){
    Diff = abs(m[1]-m[2])
    CV = s
    print(&quot;EffectSize calculated for length(m) == 2, and length(s) == 1&quot;)
  }else if (length(m) &gt; 2 &amp;&amp; length(s) &gt; 1){
    Diff = max(m)-min(m)
    CV = sqrt(sum((s^2))/length(s))
    print(&quot;EffectSize calculated for length(m) &gt; 2, and length(s) &gt; 1&quot;)
  }else if (length(m) &gt; 2 &amp;&amp; length(s) == 1){
  Diff = max(m)-min(m)
  CV = s
  print(&quot;EffectSize calculated for length(m) &gt; 2, and length(s) == 1&quot;)
}
  EffectSize &lt;- Diff/CV
  return(EffectSize)
}</code></pre>
<p>Test your function with the three cases:</p>
<div id="effect-size" class="section level4">
<h4>1936 Effect Size</h4>
<p>Use just the mean from 1936 and the associated standard deviation</p>
<pre class="r"><code>general.d(268.1, 124.8)</code></pre>
<pre><code>## [1] &quot;EffectSize calculated for length(m) == 1, and length(s) == 1&quot;</code></pre>
<pre><code>## [1] 2.148237</code></pre>
</div>
<div id="versus-2006" class="section level4">
<h4>1936 versus 2006</h4>
<p>This should duplicate results from prior exercises.</p>
<pre class="r"><code>general.d(c(268.1,384.4), c(124.8,168.3))</code></pre>
<pre><code>## [1] &quot;EffectSize calculated for length(m) == 2, and length(s) &gt; 1&quot;</code></pre>
<pre><code>## [1] 0.7849876</code></pre>
<p>Yes, it matches the result from Homework 4</p>
</div>
<div id="all-of-calories-per-serving." class="section level4">
<h4>All of Calories per Serving.</h4>
<p>Use the vectors from the Reuse chunk.</p>
<pre class="r"><code>general.d(CaloriesPerServingMean,CaloriesPerServingSD)</code></pre>
<pre><code>## [1] &quot;EffectSize calculated for length(m) &gt; 2, and length(s) &gt; 1&quot;</code></pre>
<pre><code>## [1] 0.9051585</code></pre>
<p>Are these three scenarios sufficient to test every path through <code>general.d</code>?</p>
<p>Yes, these three scenarious are sufficient to test for all conditions mentioned above.</p>
</div>
</div>
<div id="exercise-2" class="section level1">
<h1>Exercise 2</h1>
<p>Previously, we’ve calculated required replicates based on the <span class="math inline">\(z\)</span> distribution. In this exercise, you will calculate required replicates based on the <span class="math inline">\(t\)</span> disttibution. You must implement one of two algorithms given below. For both algorithmss, alculate degrees of freedom as <span class="math inline">\(\nu = n*k-k\)</span> where <span class="math inline">\(n\)</span> is the current estimate for required replicates and let <span class="math inline">\(k=2\)</span></p>
<div id="algorithm-1-from-cochran-and-cox" class="section level3">
<h3>Algorithm 1 (from Cochran and Cox, )</h3>
<p>Use the formula:</p>
<p><span class="math display">\[
n \ge 2\times \left( \frac{CV}{\%Diff} \right)^2 \times \left(t_{\alpha/2,\nu}+ t_{\beta,\nu} \right)^2
\]</span></p>
<ol style="list-style-type: decimal">
<li>Start with a small <span class="math inline">\(n\)</span>, say, 2.</li>
<li>Calculate critical <span class="math inline">\(t_\alpha/2\)</span> and <span class="math inline">\(t_\beta\)</span> quantiles with <span class="math inline">\(\nu\)</span> d.f, then calculate required replicates. Label this <span class="math inline">\(n_{current}\)</span>.</li>
<li>Update <span class="math inline">\(\nu\)</span> using <span class="math inline">\(n_{current}\)</span>, then recalculate critical values and required replicates.
Label this <span class="math inline">\(n_{next}\)</span>.</li>
<li>If <span class="math inline">\(n_{current}=n_{next}\)</span> then the algorithm has converged.
Otherwise, set <span class="math inline">\(n_{current}\)</span> to <span class="math inline">\(n_{next}\)</span>, and repeat 2-3.</li>
<li>If after some sufficiently large number (say, 20), the algorithm hasn’t converged, print a message and return the largest of <span class="math inline">\(n_{current}\)</span> and <span class="math inline">\(n_{next}\)</span></li>
</ol>
<pre class="r"><code>required.replicates.t &lt;- function (m1, s1, m2, s2,n = 2, k = 2, alpha = 0.05, beta = 0.20){
  temp.required.replicates.t &lt;- function(...){
    sd.pooled &lt;- function(...){
    sqrt((s1^2 + s2^2)/2)
    }
    d &lt;- (sd.pooled(s1,s2))/abs(m1-m2)
    ceiling(2*d^2*(qt(1-alpha/2, n*k-k) + qt(1-beta, n*k-k))^2)
  }
  
  
  # n &lt;- 2
  i &lt;- 1
  ncurrent.indexed &lt;- {
  }
  nnext.indexed &lt;- {
  }
  success &lt;- FALSE
  # while (!success) {
  while (i &lt; 20 &amp;&amp; !success) {
    ncurrent &lt;- n
    ncurrent.indexed[i] &lt;- ncurrent # so we can keep track of ncurrent
    nnext &lt;- temp.required.replicates.t(m1, s1, m2, s2, n = ncurrent)
    nnext.indexed[i] &lt;- nnext # so we can keep track of nnext
    success &lt;- nnext == ncurrent
    if (!success &amp;&amp; i == 20) {
      # if (success ){
      print(&quot;The algorithm DO NOT converge!!!!!&quot;)
      print(paste0(&quot;The largest of ncurrent is : &quot;, max(ncurrent.indexed)))
      print(paste0(&quot;The nnext is: &quot;, nnext))
    } else if (success) {
      print(paste0(&quot;The algorithm DO converge at iteration &quot; , i , &quot; !!!!!&quot;))
      break
    }
    n &lt;- nnext
    i &lt;- i + 1
  }
  values &lt;-
    list(n.current = ncurrent.indexed, n.next = nnext.indexed)
  return(values)
}

# Copying required.replicates function from last homework
required.replicates &lt;- function (m1,m2, s1,s2, alpha=0.05, beta=0.2){
  n &lt;- 2* ((((sqrt((s1^2 + s2^2)/2))/(m1-m2))^2) * (qnorm((1-alpha/2)) + qnorm((1-beta)))^2) 
  return(round(n,0))
}</code></pre>
</div>
<div id="algorithm-2" class="section level3">
<h3>Algorithm 2</h3>
<ol style="list-style-type: decimal">
<li>Start with a small <span class="math inline">\(n\)</span>, say, 2.</li>
<li>Calculate critical <span class="math inline">\(t_\alpha\)</span> quantile using the central <span class="math inline">\(t\)</span> distribution with <span class="math inline">\(\nu\)</span> d.f.</li>
<li>Estimate Type IIShow in New WindowClear OutputExpand/Collapse Output error (p-value) under the alternate hypothesis using the non-central <span class="math inline">\(t\)</span> distribution with <span class="math inline">\(\nu\)</span> d.f, at the critical <span class="math inline">\(t\)</span> from 2. Calculate non-centrality parameter as
<span class="math display">\[
NCP = \frac{\%Diff}{CV} \sqrt{\frac{n}{2}}
\]</span></li>
<li>If the resulting error is less than <span class="math inline">\(1-\beta\)</span>, accept the current value of <span class="math inline">\(n\)</span>. Otherwise increment <span class="math inline">\(n\)</span> and repeate 2-3.</li>
<li>If desired power is not achieved after a large number of iterations (say, 1000), terminate the calculations and return NA.</li>
</ol>
<p>Implement the algorithm as a function or macro named <code>required.replicates.t</code>, with parameters <code>mu</code>, <code>sigma</code> and an optional parameter <code>k</code>. Test your function by comoparing with required replicates from prior exercises for calories per serving, 1936 versus 2006, 1936 vs 1997 and 1997 vs 2006.</p>
<p>For either algoorithm, you might consider starting with an initial value of <span class="math inline">\(n\)</span> calculated using the <span class="math inline">\(z\)</span> critical values as before. Can you be certain that the <span class="math inline">\(z\)</span> formula will not estimate more required replicates than the <span class="math inline">\(t\)</span> algorithm?</p>
<div id="versus-2006-1" class="section level4">
<h4>1936 versus 2006</h4>
<pre class="r"><code>required.replicates(268.1, 124.8, 384.4, 168.3)</code></pre>
<pre><code>## [1] 67</code></pre>
<pre class="r"><code>required.replicates.t(268.1, 124.8, 384.4, 168.3)</code></pre>
<pre><code>## [1] &quot;The algorithm DO converge at iteration 4 !!!!!&quot;</code></pre>
<pre><code>## $n.current
## [1]  2 94 26 27
## 
## $n.next
## [1] 94 26 27 27</code></pre>
</div>
<div id="versus-1997" class="section level4">
<h4>1936 versus 1997</h4>
<pre class="r"><code>required.replicates(268.1, 124.8, 288.6, 122.0)</code></pre>
<pre><code>## [1] 38</code></pre>
<pre class="r"><code>required.replicates.t(268.1, 124.8, 288.6, 122.0)</code></pre>
<pre><code>## [1] &quot;The algorithm DO converge at iteration 3 !!!!!&quot;</code></pre>
<pre><code>## $n.current
## [1]    2 2085  570
## 
## $n.next
## [1] 2085  570  570</code></pre>
</div>
<div id="versus-2006-2" class="section level4">
<h4>1997 versus 2006</h4>
<pre class="r"><code>required.replicates(384.4,168.3,288.6,122.0)</code></pre>
<pre><code>## [1] 17</code></pre>
<pre class="r"><code>required.replicates.t(384.4,168.3,288.6,122.0)</code></pre>
<pre><code>## [1] &quot;The algorithm DO converge at iteration 3 !!!!!&quot;</code></pre>
<pre><code>## $n.current
## [1]   2 136  38
## 
## $n.next
## [1] 136  38  38</code></pre>
<p>You might find it useful to reproduce the plots from Homework 4, Ex. 3. Plot the central and non-central <span class="math inline">\(t\)</span> distributions over the range <span class="math inline">\(-3,4\)</span>, and produce plots for seledted <span class="math inline">\(n\)</span>.</p>
</div>
</div>
</div>
<div id="exercise-3" class="section level1">
<h1>Exercise 3</h1>
<p>Calculate a cumulative probability value from the normal pdf, using the Newton-Cotes formula</p>
<p><span class="math display">\[
\int _{x_0} ^{x_n} f(x) dx \approx \sum _{i=0} ^n h f(x_i)
\]</span></p>
<p>where <span class="math inline">\(x_1, ..., x_n\)</span> are a sequence of evenly spaced numbers from <span class="math inline">\(-2 \dots 2\)</span>, with <span class="math inline">\(x_i = x_0 + h i\)</span>, <span class="math inline">\(n\)</span> is the number of <span class="math inline">\(x_i\)</span> in the sequence and step size <span class="math inline">\(h = (x_n -x_0)/n\)</span>.</p>
<p>We will calculate this integral by calculating successive approximations of <span class="math inline">\(f = L(x;0,1)\)</span> <code>= norm.pdf</code> over series of <span class="math inline">\(x\)</span> with increasingly smaller step sizes.</p>
<div id="part-a." class="section level2">
<h2>Part a.</h2>
<p>Calculate <span class="math inline">\(L_0\)</span> by summing over <span class="math inline">\(L(\bf{X_0})\)</span>, where <span class="math inline">\(X_0\)</span> is a series from <span class="math inline">\(x_0=-2, \dots, x_n=2\)</span> incremented by <span class="math inline">\(h_0=0.1\)</span>. Multiply this sum by <span class="math inline">\(h_0\)</span> for an approximate <span class="math inline">\(\int _{x_0} ^{x_n} L(x) dx\)</span></p>
<pre class="r"><code>h0_val &lt;- 0.1
x0_val&lt;-{}
x0_val &lt;- seq(-2,2,h0_val)
result0 &lt;- sum(x0_val)
result0 </code></pre>
<pre><code>## [1] 4.662937e-15</code></pre>
<pre class="r"><code>normal.pdf.0 &lt;- result0 *h0_val
normal.pdf.0</code></pre>
<pre><code>## [1] 4.662937e-16</code></pre>
<p>Think of this as the sum of a series of rectangles, each <span class="math inline">\(h\)</span> wide and a height given by the normal pdf.</p>
</div>
<div id="part-b." class="section level2">
<h2>Part b.</h2>
<p>Create a second series <span class="math inline">\(X_1\)</span> by setting <span class="math inline">\(h_1 = h_0/2\)</span>. Compute <span class="math inline">\(L_1\)</span> from this series as in part a. Let <span class="math inline">\(i=1\)</span>
You now have the are of twice as many rectangles as part a, but each is half as wide.</p>
<pre class="r"><code># Now, Create a second series  X_1
h1_val &lt;- h0_val/2
x1_val&lt;-{}
x1_val &lt;- seq(-2,2,h1_val)
result1 &lt;- sum(x1_val)
result1 </code></pre>
<pre><code>## [1] 8.881784e-15</code></pre>
<pre class="r"><code>normal.pdf.1 &lt;- result1 *h1_val
normal.pdf.1</code></pre>
<pre><code>## [1] 4.440892e-16</code></pre>
</div>
<div id="part-c." class="section level2">
<h2>Part c.</h2>
<p>Compute <span class="math inline">\(\delta=|L_i - L_{i-1}|\)</span>. If <span class="math inline">\(\delta &lt; 0.0001\)</span>, your sequence of iterations has converged on a solution for <span class="math inline">\(L\)</span>. Finish with Part d. Otherwise, increment <span class="math inline">\(i\)</span>, let <span class="math inline">\(h_i = h_{i-1}/2\)</span>. Create the next series <span class="math inline">\(X_i\)</span> and compute the next <span class="math inline">\(L_i\)</span>.</p>
<p>Hint: code this first as a for loop of a small number of <span class="math inline">\(i\)</span> until you know your code will converge toward a solution.</p>
<pre class="r"><code>h_val&lt;- 0
seq1&lt;-{}
seq2&lt;-{}
for (x in 1:10){
  
  if (x == 1 ){
    hx &lt;- 0.1
    h_val[x] &lt;- hx
  }
  
  else {
    hx &lt;- h_val[x]
  }
  
  y &lt;- x +1
  hy &lt;- hx/2
  h_val[y] &lt;- hy
  
  seq1 &lt;- seq(-2,2,hx)
  sumSeq1 &lt;- sum(seq1)
  pdf1 &lt;- sumSeq1*hx
  seq2 &lt;- seq(-2,2,hy)
  sumSeq2 &lt;- sum(seq2)
  pdf2 &lt;- sumSeq2*hy  
  del &lt;- abs(sumSeq2 - sumSeq1)  
  if (del &lt; 0.0001){
    print(&quot;The sequence has been converged&quot;)
    break
  }
  
}</code></pre>
<pre><code>## [1] &quot;The sequence has been converged&quot;</code></pre>
</div>
</div>
<div id="part-d" class="section level1">
<h1>Part d</h1>
<p>Report <span class="math inline">\(i\)</span>, <span class="math inline">\(n\)</span> and <span class="math inline">\(h\)</span>.</p>
<pre class="r"><code>x</code></pre>
<pre><code>## [1] 1</code></pre>
<pre class="r"><code>h_val[y]</code></pre>
<pre><code>## [1] 0.05</code></pre>
<pre class="r"><code>length(seq2)-length(seq1)</code></pre>
<pre><code>## [1] 40</code></pre>
<p>To check your results, compare your final <span class="math inline">\(L_i\)</span> to</p>
<pre class="r"><code>pnorm(-2, lower.tail = TRUE)-pnorm(-2, lower.tail = TRUE)</code></pre>
<pre><code>## [1] 0</code></pre>
<p>Is your estimate within <span class="math inline">\(0.0001\)</span> of this value?</p>
<p>You might find it useful to produce staircase plots for the first 2-4 iterations (plot <span class="math inline">\(L_i\)</span> vs <span class="math inline">\(X_i\)</span> on one graph). You might also find it interesting to plot <span class="math inline">\(\delta\)</span> or <span class="math inline">\(L\)</span> versus <span class="math inline">\(i\)</span> or <span class="math inline">\(h\)</span>. You can create vectors to hold the intermediate steps - 10 iterations should be enough. How many iterations might it take to get within 0.000001 of the expected value from R?</p>
</div>
<div id="exercise-4" class="section level1">
<h1>Exercise 4</h1>
<div id="part-a.-1" class="section level2">
<h2>Part a.</h2>
<p>Write a function to compute mean, standard deviation, skewness and kurtosis from a single vector of numeric values. You can use the built-in mean function, but must use one (and only one) for loop to compute the rest. Be sure to include a check for missing values. Note that computationally efficient implementations of moments calculations take advantage of <span class="math inline">\((Y_i-\bar{Y})^4 = (Y_i-\bar{Y}) \times (Y_i-\bar{Y})^3\)</span>, etc.</p>
<p>See <a href="https://www.itl.nist.gov/div898/handbook/eda/section3/eda35b.htm" class="uri">https://www.itl.nist.gov/div898/handbook/eda/section3/eda35b.htm</a> for formula for skewness and kurtosis. This reference gives several definitions for both skewness and kurtosis, you only need to implement one formula for each. Note that for computing skewness and kurtosis, standard deviation is computed using <span class="math inline">\(N\)</span> as a divisor, not <span class="math inline">\(N-1\)</span>.</p>
<p>Your function should return a list with <code>Mean</code>, <code>SD</code>, <code>Skewness</code> and <code>Kurtosis</code>. If you use IML, you will need to implement this as a subroutie and use call by reference; include these variables in parameter list.</p>
<pre class="r"><code> ss_x=0 
  temp.kurtosis=0
  temp.skewness=0
  i=1
  k=0
  # length.x=length(x)
  # creating a function for calculating mean, sd, skewness and kurtosis
  kurtskw=function(x){
    # while (i &lt;= length.x) {
    for (i in 1:length(x)){
      if(!is.na(x[i])){
        meanX=mean(x,na.rm = TRUE)
        ss_x=ss_x + ((x[i]- meanX)^2)
        temp.kurtosis= temp.kurtosis + ((x[i] - meanX)^4)
        temp.skewness=temp.skewness + ((x[i] - meanX)^3)
        k=k+1
      }
      # i=i+1
    }   
    meanX=mean(x,na.rm = TRUE)
    Sd=sqrt(ss_x/k)
    kurtosis = temp.kurtosis/(k*(Sd^4))
    skewness =  temp.skewness/((Sd^3)*k)
    return(list(meanX=meanX,Sd=Sd,kurtosis=kurtosis,skewness=skewness))
  }</code></pre>
</div>
<div id="part-b.-1" class="section level2">
<h2>Part b.</h2>
<p>Test your function by computing moments for <code>Price</code> from <code>pumpkins.csv</code>, for <code>ELO</code> from <code>elo.csv</code> or the combine observations from <code>SiRstvt</code>. If find that <code>ELO</code> shows both skewness and kurtosis, <code>Price</code> is kurtotic but not skewed, while <code>SiRstvt</code> are approximately normal.</p>
<pre class="r"><code>pumpkins.dat =read.table(&quot;https://raw.githubusercontent.com/achalneupane/data/master/pumpkins.csv&quot;, header = T, sep = &quot;,&quot;)
ELO.dat =read.table(&quot;https://raw.githubusercontent.com/achalneupane/data/master/elo.csv&quot;, header = T, sep = &quot;,&quot;)
SiRstvt.dat &lt;- read.table(&quot;https://raw.githubusercontent.com/achalneupane/data/master//SiRstvt.dat&quot;, header = FALSE, skip = 59)
x = pumpkins.dat$Price
y = ELO.dat$ELO
# z = vector(SiRstvt.dat)
library(reshape2)
SiRstvt.dat &lt;- suppressWarnings(melt(SiRstvt.dat))</code></pre>
<pre><code>## No id variables; using all as measure variables</code></pre>
<pre class="r"><code>z = SiRstvt.dat$value
print(kurtskw(x))</code></pre>
<pre><code>## $meanX
## [1] 178.0667
## 
## $Sd
## [1] 40.33438
## 
## $kurtosis
## [1] 1.670802
## 
## $skewness
## [1] -0.04981076</code></pre>
<pre class="r"><code>print(kurtskw(y))</code></pre>
<pre><code>## $meanX
## [1] 1378.776
## 
## $Sd
## [1] 56.42003
## 
## $kurtosis
## [1] 3.684744
## 
## $skewness
## [1] 0.6822352</code></pre>
<pre class="r"><code>print(kurtskw(z))</code></pre>
<pre><code>## $meanX
## [1] 196.1892
## 
## $Sd
## [1] 0.1034955
## 
## $kurtosis
## [1] 2.337141
## 
## $skewness
## [1] -0.1456679</code></pre>
<p>I also found that <code>ELO</code> shows both skewness and kurtosis, <code>Price</code> is kurtotic but not skewed, while <code>SiRstvt</code> are approximately normal.</p>
<p>Note:
<a href="https://www.itl.nist.gov/div898/handbook/eda/section3/eda35b.htm" class="uri">https://www.itl.nist.gov/div898/handbook/eda/section3/eda35b.htm</a>
A fundamental task in many statistical analyses is to characterize the location and variability of a data set. A further characterization of the data includes skewness and kurtosis.
Skewness is a measure of symmetry, or more precisely, the lack of symmetry. A distribution, or data set, is symmetric if it looks the same to the left and right of the center point.</p>
<p>Kurtosis is a measure of whether the data are heavy-tailed or light-tailed relative to a normal distribution. That is, data sets with high kurtosis tend to have heavy tails, or outliers. Data sets with low kurtosis tend to have light tails, or lack of outliers. A uniform distribution would be the extreme case.
The values for asymmetry and kurtosis between -2 and +2 are considered acceptable in order to prove normal univariate distribution (George &amp; Mallery, 2010). George, D., &amp; Mallery, M. (2010). SPSS for Windows Step by Step: A Simple Guide and Reference, 17.0 update (10a ed.) Boston: Pearson.</p>
<p>Also,
If skewness is not close to zero, then your data set is not normally distributed.
If skewness is less than -1 or greater than 1, the distribution is highly skewed.
If skewness is between -1 and -0.5 or between 0.5 and 1, the distribution is moderately skewed.
If skewness is between -0.5 and 0.5, the distribution is approximately symmetric.</p>
<pre class="r"><code>library(moments)
kurtosis(x, na.rm = TRUE)</code></pre>
<pre><code>## [1] 1.670802</code></pre>
<pre class="r"><code>skewness(x, na.rm = TRUE)</code></pre>
<pre><code>## [1] -0.04981076</code></pre>
<pre class="r"><code>kurtosis(y, na.rm = TRUE)</code></pre>
<pre><code>## [1] 3.684744</code></pre>
<pre class="r"><code>skewness(y, na.rm = TRUE)</code></pre>
<pre><code>## [1] 0.6822352</code></pre>
<pre class="r"><code>kurtosis(z, na.rm = TRUE)</code></pre>
<pre><code>## [1] 2.337141</code></pre>
<pre class="r"><code>skewness(z, na.rm = TRUE)</code></pre>
<pre><code>## [1] -0.1456679</code></pre>
</div>
</div>
<div id="exercise-5" class="section level1">
<h1>Exercise 5</h1>
<p>In this exercise, we will use run-time profiling and timing to compare the speed of execution for different functons or calculations. In the general, the algorithm will be</p>
<ol style="list-style-type: decimal">
<li>Write a loop to execute a large number of iterations.
I find <span class="math inline">\(10^6\)</span> to be useful; you might start with a smaller number as you develop your code.</li>
<li>In this loop, call a function or perform a calculation.
You don’t need to use or print the results, just assign the result to a local variable.</li>
<li>Repeat 1 and 2, but with a different function or formula.</li>
<li>Repeat steps 1-3 10 times, saving the time of execution for each pair of the 10 tests. Calculate mean, standard deviation and effect size for the two methods tested.</li>
</ol>
<p>If you choose R, I’ve included framework code using <code>Rprof</code>; I’ve included framework code for IML in the SAS template.</p>
<p>Test options
- In homework 3, you were given two formula for the Poisson pmf,</p>
<p><span class="math display">\[
\begin{aligned}
f(x;\lambda) &amp; = \frac{e^{-\lambda} \lambda^x}{x!} \\
             &amp; = exp(-\lambda)(\frac{1}{x!}) exp[x\times log(\lambda)] \\
\end{aligned}
\]</span>
Compare the computationally efficiency of these two formula.</p>
<ul>
<li>Create a sequence <code>x</code> of numbers -3 to 3 of length <span class="math inline">\(10^6\)</span> or so. In the first test, detetermine the amoung of time it takes to compute <span class="math inline">\(10^5\)</span> estimates of <code>norm.pdf</code> by visiting each element of <code>x</code> in a loop. In the second test, simply pass <code>x</code> as an argument to <code>norm.pdf</code>. Does R or IML optimize vector operations?</li>
</ul>
<pre class="r"><code># A
x0 = -2
xn = 2
h0 &lt;- 0.1 # spaced by 0.1
# Xi = x_0+h
X0 &lt;- seq(x0,xn,h0)
X0</code></pre>
<pre><code>##  [1] -2.0 -1.9 -1.8 -1.7 -1.6 -1.5 -1.4 -1.3 -1.2 -1.1 -1.0 -0.9 -0.8 -0.7 -0.6
## [16] -0.5 -0.4 -0.3 -0.2 -0.1  0.0  0.1  0.2  0.3  0.4  0.5  0.6  0.7  0.8  0.9
## [31]  1.0  1.1  1.2  1.3  1.4  1.5  1.6  1.7  1.8  1.9  2.0</code></pre>
<pre class="r"><code>L0 &lt;- sum(X0)
L0</code></pre>
<pre><code>## [1] 4.662937e-15</code></pre>
<pre class="r"><code>normal_pdf0 &lt;- L0*h0
normal_pdf0</code></pre>
<pre><code>## [1] 4.662937e-16</code></pre>
<pre class="r"><code># B



h1 &lt;- h0/2
X1 &lt;- seq(-2,2,h1)

L1 &lt;- sum(X1)
L1</code></pre>
<pre><code>## [1] 8.881784e-15</code></pre>
<pre class="r"><code>normal_pdf1 &lt;- L1*h1
normal_pdf1</code></pre>
<pre><code>## [1] 4.440892e-16</code></pre>
<pre class="r"><code># C 



# Computing delta to meet the condition
H &lt;- 0

for (i in 1:1){
  
  if (i == 1 ){
    hi &lt;- 0.1
    H[i] &lt;- hi
  } else {
    hi &lt;- H[i]
  }
  # Set j as i+1
  j &lt;- i +1
  
  hj &lt;- hi/2
  H[j] &lt;- hj
  
  Xi &lt;- seq(-2,2,hi)
  Li &lt;- sum(Xi)
  normal_pdf.i &lt;- Li*hi
  
  xj &lt;- seq(-2,2,hj)
  Lj &lt;- sum(xj)
  normal_pdf.j &lt;- Lj*hj
  
  delta &lt;- abs(Lj - Li)
  
  # If converge print
  if (delta &lt; 0.0001){
    print(paste0(&quot;The sequence has converged at iteration i: &quot;, i, &quot; and iteration j: &quot;, j))
    break
  }
  
}</code></pre>
<pre><code>## [1] &quot;The sequence has converged at iteration i: 1 and iteration j: 2&quot;</code></pre>
<ul>
<li>The mathematical statement <span class="math inline">\(\sqrt{x}\)</span> can be coded as either <code>sqrt(x)</code> or <code>x^(1/2)</code>. Similarly, <span class="math inline">\(e^x\)</span> can be written as <span class="math inline">\(exp(1)^x\)</span> or <span class="math inline">\(exp(x)\)</span>. These pairs are mathematically equivalent, but are they computationally equivalent. Write two test loops to compare formula with either <span class="math inline">\(\sqrt{x}\)</span> or <span class="math inline">\(e^x\)</span> of some form (the normal pdf, perhaps).</li>
</ul>
<p>I find <span class="math inline">\(10^5 - 10^7\)</span> give useful results, and that effect size increases with the number iterations; there is some overhead in the loop itself that contributes relatively less with increasing interations.</p>
<pre class="r"><code>Rprof(&quot;test1&quot;)
## iteration code 1
Rprof(NULL)
Rprof(&quot;test2&quot;)
## iteration code 2
Rprof(NULL)
#execution time for test 1
summaryRprof(&quot;test1&quot;)$sampling.time
#execution time for test 2
summaryRprof(&quot;test2&quot;)$sampling.time
#functions called in test 1
summaryRprof(&quot;test1&quot;)$by.self
#functions called in test 2
summaryRprof(&quot;test2&quot;)$by.self</code></pre>
</div>
<div id="exercise-6" class="section level1">
<h1>Exercise 6</h1>
<p>Write an improved Poisson pmf function, call this function <code>smart.pois</code>, using the same parameters <code>x</code> and <code>lamba</code> as before, but check <span class="math inline">\(x\)</span> for the following conditions.
1. If <span class="math inline">\(x\)</span> is negative, return a missing value (<code>NA</code>, <code>.</code>).
2. If <span class="math inline">\(x\)</span> is non-integer, truncate <span class="math inline">\(x\)</span> then proceed.
3. If <span class="math inline">\(x\)</span> is too large for the factorial function, return the smallest possible numeric value for your machine. What <span class="math inline">\(x\)</span> is too large? You could test the return value of <code>factorial</code> against <code>Inf</code>.</p>
<p>You can reuse previously tested code writing this function as a wrapper for a previously written <code>pois.pmf</code> and call that function only after testing the for specified conditions.</p>
<p>Test this function by repeating the plots from Homework 4, Ex 4. How is the function different than <code>dpois</code>?</p>
<p><strong>Warning</strong> You may not be able to call this new function exactly as in the last exercise (Hint - what are the rules for conditions in <code>if</code> statements?). Instead, you might need to create a matrix or data table and use <code>apply</code> functions, or write a loop for visit each element in a vector of <code>x</code>.</p>
<pre class="r"><code>options(warn=-1)

smart.pois &lt;- function(x, lambda){
  if(x&lt;0){
    poisson.d &lt;- NA
    # poisson.d &lt;- &quot;NA check&quot;
  }else if(class(x) != &quot;integer&quot; &amp; suppressWarnings(factorial(x)) != Inf){
    x &lt;- trunc(x)
    poisson.d &lt;- exp(-lambda)*(1/(factorial(round(x,0))))*exp(round(x,0)*(log(lambda)))
    # poisson.d &lt;- &quot;integer.check&quot;
  }else if(suppressWarnings(factorial(x)) == Inf){
    smallest.value &lt;- .Machine
    poisson.d &lt;- smallest.value$double.xmin
    # poisson.d &lt;- &quot;factorial.check&quot;
  }
  return(poisson.d)
}



x_a &lt;- seq(-5, 5, 0.1)

smart.poisson.probability.x_a &lt;- {}
lambda &lt;- 1
for(i in 1:length(x_a)){
out &lt;- smart.pois(x_a[i], lambda)
smart.poisson.probability.x_a &lt;- c(smart.poisson.probability.x_a, out)
}
smart.poisson.probability.x_a</code></pre>
<pre><code>##   [1]          NA          NA          NA          NA          NA          NA
##   [7]          NA          NA          NA          NA          NA          NA
##  [13]          NA          NA          NA          NA          NA          NA
##  [19]          NA          NA          NA          NA          NA          NA
##  [25]          NA          NA          NA          NA          NA          NA
##  [31]          NA          NA          NA          NA          NA          NA
##  [37]          NA          NA          NA          NA          NA          NA
##  [43]          NA          NA          NA          NA          NA          NA
##  [49]          NA          NA 0.367879441 0.367879441 0.367879441 0.367879441
##  [55] 0.367879441 0.367879441 0.367879441 0.367879441 0.367879441 0.367879441
##  [61] 0.367879441 0.367879441 0.367879441 0.367879441 0.367879441 0.367879441
##  [67] 0.367879441 0.367879441 0.367879441 0.367879441 0.183939721 0.183939721
##  [73] 0.183939721 0.183939721 0.183939721 0.183939721 0.183939721 0.183939721
##  [79] 0.183939721 0.183939721 0.061313240 0.061313240 0.061313240 0.061313240
##  [85] 0.061313240 0.061313240 0.061313240 0.061313240 0.061313240 0.061313240
##  [91] 0.015328310 0.015328310 0.015328310 0.015328310 0.015328310 0.015328310
##  [97] 0.015328310 0.015328310 0.015328310 0.015328310 0.003065662</code></pre>
<pre class="r"><code>norm.pdf &lt;- function(x,mu=0,sigma=1){
  l&lt;-1/(sigma*sqrt(pi*2))*exp(-((x-mu)^2)/(2*sigma^2))
  return(l)
}
normal.liklihood.x_a &lt;- norm.pdf(x_a)


plot(x_a,normal.liklihood.x_a,type=&quot;l&quot;,col=&quot;black&quot;)
lines(x_a,smart.poisson.probability.x_a,col=&quot;red&quot;)</code></pre>
<p><img src="/achalneupane.github.io/post/Control_Structures_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<pre class="r"><code># using base functions for norm.pdf and poisson probability for x_a
base.normal.liklihood.x_a &lt;- dnorm(x_a,0, 1)
base.poiss.x_a &lt;- dpois(x=x_a, lambda = lambda)

plot(x_a,base.normal.liklihood.x_a,type=&quot;l&quot;,col=&quot;black&quot;)
lines(x_a,base.poiss.x_a,col=&quot;red&quot;)</code></pre>
<p><img src="/achalneupane.github.io/post/Control_Structures_files/figure-html/unnamed-chunk-22-2.png" width="672" /></p>
<pre class="r"><code># Now
# Using mean and standard deviation for servings per recipe from 1936:
mu = 12.9; sigma = 13.3

# Now we find the upper and lower bounds as:
x.lower &lt;- floor(mu-5*sigma)
x.upper &lt;- ceiling(mu+5*sigma)

# Now taking the length of x_a as a reference, we create the equeally spaced
# sequence from lower to upper bound as followed:
spacer &lt;- (x.upper - x.lower)/(length(x_a) - 1)

x_b &lt;- seq(x.lower, x.upper, spacer)
# To show both x_a and x_b &#39;s lenghts are equal:
length(x_a)</code></pre>
<pre><code>## [1] 101</code></pre>
<pre class="r"><code>length(x_b)</code></pre>
<pre><code>## [1] 101</code></pre>
<pre class="r"><code>norm.pdf &lt;- function(x, mu = 12.9, sigma = 13.3){
  l&lt;-1/(sigma*sqrt(pi*2))*exp(-((x-mu)^2)/(2*sigma^2))
  return(l)
}
normal.liklihood.x_b &lt;- norm.pdf(x_b)


# Calculate poisson probability for x_b using smart.pois
#using sigma = 13.3 to compare the difference with the first plot

smart.poisson.probability.x_b &lt;- {}
lambda &lt;- 12
for(i in 1:length(x_a)){
  out &lt;- smart.pois(x_a[i], lambda)
  smart.poisson.probability.x_b &lt;- c(smart.poisson.probability.x_b, out)
}
# # smart.pois output for x_b
# smart.poisson.probability.x_b


# Repeating the plot from homework 4 Ex 4
plot(x_b,normal.liklihood.x_b,type=&quot;l&quot;,col=&quot;black&quot;)
lines(x_b,smart.poisson.probability.x_b,col=&quot;red&quot;)</code></pre>
<p><img src="/achalneupane.github.io/post/Control_Structures_files/figure-html/unnamed-chunk-22-3.png" width="672" /></p>
<pre class="r"><code># Using base functions for x_b
base.normal.liklihood.x_b &lt;- dnorm(x_b,0, 1)
base.poiss.x_b &lt;- dpois(x=x_b, lambda = 12)

plot(x_b,base.normal.liklihood.x_b,type=&quot;l&quot;,col=&quot;black&quot;)
lines(x_b,base.poiss.x_b,col=&quot;red&quot;)</code></pre>
<p><img src="/achalneupane.github.io/post/Control_Structures_files/figure-html/unnamed-chunk-22-4.png" width="672" /></p>
<pre class="r"><code># FInally, we can also check how smart.pois and dpois functions behave for the following numerical values
# Testing three conditions with smart.pois
smart.pois(-1, 12)</code></pre>
<pre><code>## [1] NA</code></pre>
<pre class="r"><code>smart.pois(2, 12) </code></pre>
<pre><code>## [1] 0.0004423833</code></pre>
<pre class="r"><code>smart.pois(2.233, 12)</code></pre>
<pre><code>## [1] 0.0004423833</code></pre>
<pre class="r"><code>smart.pois(300, 12)</code></pre>
<pre><code>## [1] 2.225074e-308</code></pre>
<pre class="r"><code>#comparing same parameters with dpois
dpois(-1, 12)</code></pre>
<pre><code>## [1] 0</code></pre>
<pre class="r"><code>dpois(2, 12)</code></pre>
<pre><code>## [1] 0.0004423833</code></pre>
<pre class="r"><code>dpois(2.233, 12)</code></pre>
<pre><code>## [1] 0</code></pre>
<pre class="r"><code>dpois(300, 12)</code></pre>
<pre><code>## [1] 1.140347e-296</code></pre>
<p>Smart pois is different from dpois as smart.pois gives NAs for negative values and dpois gives, zero. In other word, we can say that dpois cannot handle non-integer, but smart.pois can.Also, for non-integer, dpois gives zero. Also, I couldn’t find any similar pattern in the output of smart.poisson.probability.x_a and base.poiss.x_a</p>
</div>

    </div>

    


    

<div class="article-tags">
  
  <a class="badge badge-light" href="/achalneupane.github.io/tags/r/">R</a>
  
  <a class="badge badge-light" href="/achalneupane.github.io/tags/statistics/">Statistics</a>
  
  <a class="badge badge-light" href="/achalneupane.github.io/tags/statistical_programming/">Statistical_programming</a>
  
</div>



    
      








  
  
    
  
  





  
  
  
  
  <div class="media author-card" itemscope itemtype="http://schema.org/Person">
    

    <div class="media-body">
      <h5 class="card-title" itemprop="name"><a href="/achalneupane.github.io/authors/achal-neupane/"></a></h5>
      
      
      <ul class="network-icon" aria-hidden="true">
        
      </ul>
    </div>
  </div>



      
      
      <div class="article-widget">
        <div class="hr-light"></div>
        <h3>Related</h3>
        <ul>
          
          <li><a href="/achalneupane.github.io/post/functions/">Functions</a></li>
          
          <li><a href="/achalneupane.github.io/post/calculations/">Calculations</a></li>
          
          <li><a href="/achalneupane.github.io/post/r_arrays/">Arrays</a></li>
          
          <li><a href="/achalneupane.github.io/post/getting_started/">Getting Started</a></li>
          
        </ul>
      </div>
      
    

    

    


  </div>
</article>

      

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/r.min.js"></script>
        
      

      
      
    

    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/achalneupane.github.io/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/achalneupane.github.io/js/academic.min.16bbb3750feb7244c9bc409a5a4fe678.js"></script>

    






  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/achalneupane.github.io/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/achalneupane.github.io/terms/">Terms</a>
        
  </p>
  

  <p class="powered-by">
    &copy; 2019 &middot; 

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
